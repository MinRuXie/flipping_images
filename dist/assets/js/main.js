async function init(){let e=await fetch("src/assets/data/images.json"),t=await e.json(),n=t.card_back,s=t.card_fronts;let a=s.slice();a.push(t.card_back),a.push(t.game_cover);for(let e=0;e<a.length;e++)l=a[e],(new Image).src=l;var l;$((function(){let e,t=document.getElementById("js-correct-player"),a=document.getElementById("js-incorrect-player"),l=document.getElementById("js-flipping-player"),i=document.getElementById("js-start-player"),c=$("#js-start-btn"),o=$("#js-card-wrap"),r=$("#js-restart-btn"),d=$("#js-timer"),f=$("#js-history-list"),u=$("#js-game-cover-back"),m=$("#js-reward-wrap"),p=[],g=[],h=0,v=[],j=0,w=0,y=[];function b(){let e=s.slice();q(e);let t=e.slice(0,12);p=t.concat(t),q(p),g=[];for(let e=0;e<t.length;e++)g.push(t[e]);o.fadeOut(),o.empty();for(let e=0;e<p.length;e++)o.append(`<div class="card exist">\n                        <img class="card-back" src="${n}" draggable="false" />\n                        <img class="card-front" src="${p[e]}" draggable="false"/>\n                    </div>`);o.fadeIn()}function C(){j=0,w=0,d.text(`${k(j)}:${k(w)}`),e=setInterval((function(){w++,w>=60&&(w=0,j++),d.text(`${k(j)}:${k(w)}`)}),1e3)}async function I(){g.length<=0&&(await clearInterval(e),await function(){let e=60*j+w,t="";t=e<=40?"這麼快速一定是真愛粉！":e<=70?"回去多練習吧！":"太可憐了...";let n=prompt(`遊戲結束！${t}共花費${k(j)}分${k(w)}秒！\n請輸入您的大名：`,"讓我想想");null==n&&(n="無名氏");y.push({sec:k(e),name:n}),y.sort(B),f.empty();for(let e=0;e<y.length;e++)f.append(`<li>${y[e].name} ${y[e].sec}秒</li>`)}(),m.addClass("show"),m.append('\n                <div class="reward-content">\n                    恭喜破關成功！\n                    <div class="image-wrap"></div>\n                    <div id="js-close-btn" class="btn">我收下了</div>\n                </div>'),$("#js-image-wrap").addClass("show"),$("#js-close-btn").on("click",(function(){m.empty(),m.removeClass("show")})))}function x(){h=0,v=[]}function k(e){return e<10?`0${e}`:e}function O(e){e.currentTime=0,e.play()}function q(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}function B(e,t){return e.sec-t.sec}c.on("click",(function(){O(i),$("#js-ready").fadeOut(),C()})).on("mouseenter",(function(){u.addClass("show")})).on("mouseleave",(function(){u.removeClass("show")})),r.on("click",(function(){O(i),clearInterval(e),b(),x(),C()})),$(document).on("click",".exist",(function(){if(O(l),h++,$(this).removeClass("flipped-b-to-f"),$(this).removeClass("flipped-f-to-b"),h<=2){v.push($(this)),$(this).find("img").eq(0).fadeOut(),$(this).addClass("flipped-b-to-f");for(let e=0;e<v.length;e++)v[e].removeClass("exist"),v[e].removeClass("exist");if(2==v.length){let e=v[0].find("img"),n=v[1].find("img");setTimeout((function(){if(e.eq(1).attr("src")==n.eq(1).attr("src"))new Promise((function(s,a){O(t),e.fadeOut(),n.fadeOut(),g.splice(g.indexOf(e.eq(1).attr("src")),1),s(),a()})).then((function(e){I()}),(function(e){}));else{O(a),e.eq(0).fadeIn(),n.eq(0).fadeIn();for(let e=0;e<v.length;e++)v[e].addClass("flipped-f-to-b"),v[e].addClass("flipped-f-to-b");v[0].addClass("exist"),v[1].addClass("exist")}x()}),800)}}})),b()}))}init().then((function(){let e=setInterval((function(){switch(console.log("Loading..."),document.readyState){case"interactive":case"complete":$("#js-loading").fadeOut(),clearInterval(e),console.log("Ready!")}}),500)}));