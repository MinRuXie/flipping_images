fetch("src/assets/data/images.json").then((function(e){return e.json()})).then((function(e){let t=e.card_back,n=e.card_fronts;let s=[];for(let t=0;t<e.card_fronts.length;t++)s.push(e.card_fronts[t]);s.push(e.card_back),s.push(e.game_cover),s.push(e.game_bg);for(let e=0;e<s.length;e++)a=s[e],(new Image).src=a;var a;$((function(){let e,s=$("#js-start-btn"),a=$("#js-card-wrap"),l=$("#js-restart-btn"),o=$("#js-timer"),r=$("#js-history-list"),c=$("#js-game-cover-back"),i=[],f=[],d=0,u=[],h=0,g=0,m=[];function p(){let e=n;!function(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(e);let s=[];for(let t=0;t<12;t++)s.push(e[t]);i=s.concat(s),f=[];for(let e=0;e<s.length;e++)f.push(s[e]);a.empty();for(let e=0;e<i.length;e++)a.append(`<div class="card exist">\n                        <img class="card-back" src="${t}" draggable="false" />\n                        <img class="card-front" src="${i[e]}" draggable="false"/>\n                    </div>`)}function b(){h=0,g=0,o.text(`${v(h)}:${v(g)}`),e=setInterval((function(){g++,g>=60&&(g=0,h++),o.text(`${v(h)}:${v(g)}`)}),1e3)}function v(e){return e<10?`0${e}`:e}function C(e,t){return e.sec-t.sec}s.on("click",(function(){$(".loading").fadeOut(),b()})).on("mouseenter",(function(){c.addClass("show")})).on("mouseleave",(function(){c.removeClass("show")})),l.on("click",(function(){clearInterval(e),p(),b()})),$(document).on("click",".exist",(function(){if(d++,$(this).removeClass("flipped-b-to-f"),$(this).removeClass("flipped-f-to-b"),d<=2){u.push($(this)),$(this).find("img").eq(0).fadeOut(),$(this).addClass("flipped-b-to-f");for(let e=0;e<u.length;e++)u[e].removeClass("exist"),u[e].removeClass("exist");if(2==u.length){let t=u[0].find("img"),n=u[1].find("img");setTimeout((function(){if(t.eq(1).attr("src")==n.eq(1).attr("src"))t.fadeOut(),n.fadeOut(),f.splice(f.indexOf(t.eq(1).attr("src")),1),setTimeout((function(){!function(){if(f.length<=0){clearInterval(e);let t=prompt(`遊戲結束！共花費${h}分${g}秒！\n請輸入您的大名：`,"讓我想想");null==t&&(t="無名氏"),m.push({sec:60*h+g,name:t}),m.sort(C),r.empty();for(let e=0;e<m.length;e++)r.append(`<li>${m[e].name} ${m[e].sec}秒</li>`)}}()}),500);else{t.eq(0).fadeIn(),n.eq(0).fadeIn();for(let e=0;e<u.length;e++)u[e].addClass("flipped-f-to-b"),u[e].addClass("flipped-f-to-b");u[0].addClass("exist"),u[1].addClass("exist")}d=0,u=[]}),800)}}})),p()}))})).catch((function(e){console.warn("Something went wrong.",e)}));