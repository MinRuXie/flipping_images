fetch("src/assets/data/images.json").then((function(e){return e.json()})).then((function(e){let t=e.card_back,n=e.card_fronts;let s=n.slice();s.push(e.card_back),s.push(e.game_cover),s.push(e.game_bg);for(let e=0;e<s.length;e++)a=s[e],(new Image).src=a;var a;$((function(){document.getElementById("js-bg-player").loop=!0;let e,s=document.getElementById("js-correct-player"),a=document.getElementById("js-incorrect-player"),l=document.getElementById("js-flipping-player"),r=$("#js-start-btn"),o=$("#js-card-wrap"),i=$("#js-restart-btn"),c=$("#js-timer"),d=$("#js-history-list"),f=$("#js-game-cover-back"),u=[],p=[],m=0,g=[],h=0,b=0,v=[];function y(){let e=n.slice();!function(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}}(e);let s=e.slice(0,12);u=s.concat(s),p=[];for(let e=0;e<s.length;e++)p.push(s[e]);o.empty();for(let e=0;e<u.length;e++)o.append(`<div class="card exist">\n                        <img class="card-back" src="${t}" draggable="false" />\n                        <img class="card-front" src="${u[e]}" draggable="false"/>\n                    </div>`)}function j(){h=0,b=0,c.text(`${h.toString().padStart(2,0)}:${b.toString().padStart(2,0)}`),e=setInterval((function(){b++,b>=60&&(b=0,h++),c.text(`${h.toString().padStart(2,0)}:${b.toString().padStart(2,0)}`)}),1e3)}function C(e,t){return e.sec-t.sec}r.on("click",(function(){$(".loading").fadeOut(),j()})).on("mouseenter",(function(){f.addClass("show")})).on("mouseleave",(function(){f.removeClass("show")})),i.on("click",(function(){clearInterval(e),y(),j()})),$(document).on("click",".exist",(function(){if(l.currentTime=0,l.play(),m++,$(this).removeClass("flipped-b-to-f"),$(this).removeClass("flipped-f-to-b"),m<=2){g.push($(this)),$(this).find("img").eq(0).fadeOut(),$(this).addClass("flipped-b-to-f");for(let e=0;e<g.length;e++)g[e].removeClass("exist"),g[e].removeClass("exist");if(2==g.length){let t=g[0].find("img"),n=g[1].find("img");setTimeout((function(){if(t.eq(1).attr("src")==n.eq(1).attr("src"))s.currentTime=0,s.play(),t.fadeOut(),n.fadeOut(),p.splice(p.indexOf(t.eq(1).attr("src")),1),setTimeout((function(){!function(){if(p.length<=0){clearInterval(e);let t=prompt(`遊戲結束！共花費${h}分${b}秒！\n請輸入您的大名：`,"讓我想想");null==t&&(t="無名氏"),v.push({sec:60*h+b,name:t}),v.sort(C),d.empty();for(let e=0;e<v.length;e++)d.append(`<li>${v[e].name} ${v[e].sec}秒</li>`)}}()}),500);else{a.currentTime=0,a.play(),t.eq(0).fadeIn(),n.eq(0).fadeIn();for(let e=0;e<g.length;e++)g[e].addClass("flipped-f-to-b"),g[e].addClass("flipped-f-to-b");g[0].addClass("exist"),g[1].addClass("exist")}m=0,g=[]}),800)}}})),y()}))})).catch((function(e){console.warn("Something went wrong.",e)}));