fetch("src/assets/data/images.json").then((function(t){return t.json()})).then((function(t){let e=t.card_back,n=t.card_fronts;let s=n.slice();s.push(t.card_back),s.push(t.game_cover),s.push(t.game_bg);for(let t=0;t<s.length;t++)a=s[t],(new Image).src=a;var a;$((function(){let t,s=$("#js-start-btn"),a=$("#js-card-wrap"),i=$("#js-restart-btn"),l=$("#js-timer"),o=$("#js-history-list"),r=$("#js-game-cover-back"),c=[],f=[],d=0,u=[],g=0,h=0,p=[];function m(){let t=n.slice();!function(t){for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}}(t);let s=t.slice(0,12);c=s.concat(s),f=[];for(let t=0;t<s.length;t++)f.push(s[t]);a.empty();for(let t=0;t<c.length;t++)a.append(`<div class="card exist">\n                        <img class="card-back" src="${e}" draggable="false" />\n                        <img class="card-front" src="${c[t]}" draggable="false"/>\n                    </div>`)}function b(){g=0,h=0,l.text(`${g.toString().padStart(2,0)}:${h.toString().padStart(2,0)}`),t=setInterval((function(){h++,h>=60&&(h=0,g++),l.text(`${g.toString().padStart(2,0)}:${h.toString().padStart(2,0)}`)}),1e3)}function v(t,e){return t.sec-e.sec}s.on("click",(function(){$(".loading").fadeOut(),b()})).on("mouseenter",(function(){r.addClass("show")})).on("mouseleave",(function(){r.removeClass("show")})),i.on("click",(function(){clearInterval(t),m(),b()})),$(document).on("click",".exist",(function(){if(d++,$(this).removeClass("flipped-b-to-f"),$(this).removeClass("flipped-f-to-b"),d<=2){u.push($(this)),$(this).find("img").eq(0).fadeOut(),$(this).addClass("flipped-b-to-f");for(let t=0;t<u.length;t++)u[t].removeClass("exist"),u[t].removeClass("exist");if(2==u.length){let e=u[0].find("img"),n=u[1].find("img");setTimeout((function(){if(e.eq(1).attr("src")==n.eq(1).attr("src"))e.fadeOut(),n.fadeOut(),f.splice(f.indexOf(e.eq(1).attr("src")),1),setTimeout((function(){!function(){if(f.length<=0){clearInterval(t);let e=prompt(`遊戲結束！共花費${g}分${h}秒！\n請輸入您的大名：`,"讓我想想");null==e&&(e="無名氏"),p.push({sec:60*g+h,name:e}),p.sort(v),o.empty();for(let t=0;t<p.length;t++)o.append(`<li>${p[t].name} ${p[t].sec}秒</li>`)}}()}),500);else{e.eq(0).fadeIn(),n.eq(0).fadeIn();for(let t=0;t<u.length;t++)u[t].addClass("flipped-f-to-b"),u[t].addClass("flipped-f-to-b");u[0].addClass("exist"),u[1].addClass("exist")}d=0,u=[]}),800)}}})),m()}))})).catch((function(t){console.warn("Something went wrong.",t)}));